<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<title>Painel Admin - Música</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
  body { font-family: Arial, Helvetica, sans-serif; padding: 20px; background: #f4f6fb; margin:0; }
  .card { background: #fff; padding: 18px; border-radius: 8px; max-width: 900px; margin: 20px auto; box-shadow: 0 4px 16px rgba(0,0,0,0.08);}
  input, textarea { width: 100%; padding: 8px; margin: 6px 0; border: 1px solid #ddd; border-radius: 6px; font-size:16px; box-sizing:border-box; }
  button { padding: 10px 14px; border-radius: 8px; border:none; background:#4b6cff; color:#fff; cursor:pointer; font-size:16px; transition: background 0.3s ease;}
  button:hover { background:#3a54d6; }
  .list-item { padding: 10px; border-bottom:1px solid #eee; font-size:16px;}
  .back-btn { position: fixed; top:20px; left:20px; background:linear-gradient(135deg,#5a4dff,#7a69ff); color:#e0e0ff; padding:10px 16px; border:none; border-radius:12px; cursor:pointer; font-size:14px; box-shadow:0 4px 12px rgba(90,77,255,0.6); z-index:1000; }
  .log-ip { font-family: monospace; background: #e9f0ff; color:#1a237e; padding:6px 10px; border-radius:6px; display:inline-flex; align-items:center; gap:6px; font-weight:600; cursor:pointer; user-select:text;}
  .log-ip svg { width:16px; height:16px; fill:#3f51b5; flex-shrink:0; }
  .log-times { margin-top:4px; padding-left:20px; font-size:14px; display:none; color:#333; }
</style>
</head>
<body>
<button class="back-btn" onclick="window.location.href='/'">⬅ Voltar</button>

<div class="card">
  <h2>Painel Admin</h2>

  <div id="musicSection">
    <h3>Músicas existentes</h3>
    <div id="listaMusicas"></div>
  </div>

  <hr/>

  <div id="logSection">
    <h3>Últimos acessos</h3>
    <div id="listaLogs"></div>
  </div>
</div>

<script>
  // --- DADOS SIMULADOS ---
  const musicas = [
    {data:"2025-08-12", titulo:"Música 1"},
    {data:"2025-08-13", titulo:"Música 2"},
    {data:"2025-08-13", titulo:"Música 3"},
  ];

  const logs = [
    {ip:"192.168.0.1", hora:"08:15"},
    {ip:"192.168.0.1", hora:"09:30"},
    {ip:"10.0.0.2", hora:"10:00"},
    {ip:"192.168.0.1", hora:"11:45"},
    {ip:"10.0.0.2", hora:"12:05"},
  ];

  // --- FUNÇÃO PARA LISTAR MÚSICAS ---
  function loadMusicas() {
    const lista = document.getElementById("listaMusicas");
    lista.innerHTML = "";
    musicas.forEach((m, idx) => {
      const div = document.createElement("div");
      div.className = "list-item";
      div.textContent = `${idx+1} - ${m.data} - ${m.titulo}`;
      lista.appendChild(div);
    });
  }

  // --- FUNÇÃO PARA LISTAR LOGS AGRUPADOS ---
  function loadLogs() {
    const lista = document.getElementById("listaLogs");
    lista.innerHTML = "";

    const grouped = {};
    logs.forEach(l => {
      if(!grouped[l.ip]) grouped[l.ip] = [];
      grouped[l.ip].push(l.hora);
    });

    Object.keys(grouped).forEach(ip => {
      const div = document.createElement("div");

      const ipSpan = document.createElement("span");
      ipSpan.className = "log-ip";
      ipSpan.innerHTML = `${ip} <svg viewBox="0 0 24 24"><path d="M12 16l-6-6h12z"/></svg>`;

      const timesDiv = document.createElement("div");
      timesDiv.className = "log-times";
      timesDiv.textContent = grouped[ip].join(", ");

      ipSpan.onclick = () => {
        timesDiv.style.display = timesDiv.style.display === "block" ? "none" : "block";
      };

      div.appendChild(ipSpan);
      div.appendChild(timesDiv);
      lista.appendChild(div);
    });
  }

  // --- CHAMADAS INICIAIS ---
  loadMusicas();
  loadLogs();
</script>
</body>
</html>
